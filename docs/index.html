<!DOCTYPE html>
<html>
	<head>
		<meta charset="utf-8" content="text/html" http-equiv="Content-Type" />
		<meta content="A finite state machine to manaage possible states in applications." name="description" />
		<title>Talos</title>
		<link href="https://fonts.googleapis.com/css?family=Montserrat&display=swap" rel="stylesheet">
		<link rel="stylesheet" type="text/css" href="css/sidenotes.css" />
	</head>
	<body>
		<div class="gridlayout">
			<div class="box header">
				<h1>Talos</h1>
				<h2>A finite state machine to manaage possible states in applications.</h2>
			</div>
			<div class="box subheader">
				<h3>Readme</h3>
			</div>
			<div class="box list"><h1>Talos</h1><blockquote><p> Talos [...] was a giant automaton made of bronze to protect Europa in Crete from pirates and invaders. </p><p> &ndash; <cite><a href="https://en.wikipedia.org/wiki/Talos">from Wikipedia</a></cite> </p></blockquote><p>In this case pirates and invaders are state and state transitions.</p><p>The sidenotes documentation for talos can be found <a href='https://captain-porcelain.github.io/talos/index.html'>here</a>.</p><p>Talos is a small library that implements a finite state machine that can be used to manage the state of an application and the transitions from one state to another.</p><p>An example for the usage in a CLJS frontend can be seen in my other project <a href='https://github.com/captain-porcelain/somerville/blob/master/src/cljs/somerville/visualization/gaia.cljs'>Somerville</a>.</p><p>A talos fsm is defined by a list of states and a map of transitions between them:</p><pre><code class="clojure">&#40;:require &#91;talos.core :as talos&#93;&#41;

&#40;def states
  &#40;list
    &#40;talos/state :a&#41;
    &#40;talos/state :b&#41;
    &#40;talos/state :c state-callback&#41;&#41;&#41;

&#40;def transitions
  &#40;list
    &#40;talos/transition :a-to-b :a :b&#41;
    &#40;talos/transition :b-to-c :b :c&#41;
    &#40;talos/transition :all-to-a :&#42; :a&#41;&#41;&#41;

&#40;def fsm &#40;talos/fsm states transitions&#41;&#41;
</code></pre><p>A state is identified by a keyword and may have an optional callback that is executed when the <code>fsm</code> enters that state.</p><p>Transitions are defined by an event like <code>:a-to-b</code> as well as the state in which the event is accepted and the state that is to be entered next. The special state <code>:&#42;</code> can be used to indicate that an event is accepted in any state.</p><p>A transition is triggered when the <code>fsm</code> processes an event which can have optional data associated.</p><pre><code class="clojure">&#40;talos/process! fsm {:event :a-to-b}&#41;

&#40;talos/process! fsm {:event :a-to-b :something :value}&#41;
</code></pre><p>The event is handed to callback functions with the <code>fsm</code> itself:</p><pre><code class="clojure">&#40;defn state-callback
  &#91;source-fsm source-event&#93;
  &#40;println &#40;:something source-event&#41;&#41;&#41;
</code></pre><p>The <code>fsm</code> also wraps an atom that contains a map and which can be accessed like this:</p><pre><code class="clojure">&#40;talos/data! fsm #&#40;assoc % :my-key :my-value&#41;&#41;

&#40;talos/data fsm :my-key&#41;
</code></pre><p>Transitions additionally may have a condition function that is evaluated upon the event and the state progression is performed only if the condition is evaluated as true:</p><pre><code class="clojure">&#40;def transitions
  &#40;list
    &#40;talos/transition :a-to-b :a :b &#40;fn &#91;event data&#93; &#40;= :value &#40;:something event&#41;&#41;&#41;&#41;
    &#40;talos/transition :a-to-b :a :c&#41;&#41;&#41;
</code></pre><p>The condition function is handed the event and the contents data atom of the fsm for the evaluation.</p></div>
			<div class="box subheader">
				<h3>Dependencies</h3>
			</div>
			<div class="box comment">org.clojure/clojure</div>
			<div class="box section">Maven 1.10.1</div>
						<div class="box comment">mount</div>
			<div class="box section">Maven 0.1.16</div>
						<div class="box comment">com.taoensso/timbre</div>
			<div class="box section">Maven 4.10.0</div>
			
			<div class="box subheader">
				<h3>Namespaces</h3>
			</div>
			<div class="box list">
				<a href="talos.core.html">talos.core</a>
			</div>
			<div class="box footer">
				Generated by <a href="https://github.com/captain-porcelain/sidenotes">Sidenotes</a>.
				&nbsp;&nbsp;
				Syntax highlighting provided by Alex Gorbatchev's <a href="http://alexgorbatchev.com/SyntaxHighlighter/">SyntaxHighlighter</a>
			</div>
		</div>
	</body>
</html>
